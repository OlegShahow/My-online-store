–î–∞, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ. üòÖ

–ë–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Ç—ã –Ω–µ –ø–æ–ª—É—á–∏—à—å:

API key –∏ API secret ‚Äì –Ω—É–∂–Ω—ã –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Ç–≤–æ–π —Å–µ—Ä–≤–µ—Ä –º–æ–≥ –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ñ–æ—Ç–æ –Ω–∞ Cloudinary.

Cloud name ‚Äì —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è —Ç–≤–æ–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.

–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è, –∏ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ —Ç–∞—Ä–∏—Ñ–∞ —Ö–≤–∞—Ç–∞–µ—Ç –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –æ–±—ä—ë–º—É —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –∏ —á–∏—Å–ª—É –∑–∞–ø—Ä–æ—Å–æ–≤, –Ω–æ –¥–ª—è —Ç–≤–æ–µ–π –≥–∞–ª–µ—Ä–µ–∏ —ç—Ç–æ–≥–æ –≤–ø–æ–ª–Ω–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ.

–ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Ç—ã –ø–æ–ª—É—á–∏—à—å —Ç—Ä–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞:

cloud_name

api_key

api_secret

–û–Ω–∏ –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è –≤ —Å–µ—Ä–≤–µ—Ä–Ω–æ–º –∫–æ–¥–µ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ —Å –ø–æ–º–æ—â—å—é Cloudinary API.


..................................................................................................


–û—Ç–ª–∏—á–Ω–æ! –¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã Cloudinary: cloud_name, api_key, api_secret.

–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ ‚Äî –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∏—Ö –≤ —Ç–≤–æ–π —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–¥ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ —Å –∞–¥–º–∏–Ω—Å–∫–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –ø—Ä—è–º–æ –Ω–∞ Cloudinary.

–•–æ—á–µ—à—å, —è –ø–æ–∫–∞–∂—É, –∫–∞–∫ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å server.js –∏ —Å–∫—Ä–∏–ø—Ç —Ñ–æ—Ä–º—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Cloudinary?


...............................................................................

const express = require("express");
const path = require("path");
const { Pool } = require("pg");
const multer = require("multer");
const cloudinary = require("cloudinary").v2;
const { CloudinaryStorage } = require("multer-storage-cloudinary");

const app = express();
const PORT = process.env.PORT || 3000;

// =======================================
// –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ PostgreSQL –Ω–∞ Render
// =======================================
const pool = new Pool({
  connectionString: process.env.DATABASE_URL,
  ssl: { rejectUnauthorized: false },
});

// =======================================
// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Cloudinary
// =======================================
cloudinary.config({
  cloud_name: process.env.CLOUDINARY_CLOUD_NAME, // —É–∫–∞–∂–∏ —Å–≤–æ–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ Render
  api_key: process.env.CLOUDINARY_API_KEY,
  api_secret: process.env.CLOUDINARY_API_SECRET,
});

// =======================================
// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Multer + Cloudinary
// =======================================
const storage = new CloudinaryStorage({
  cloudinary: cloudinary,
  params: {
    folder: "my-online-store", // –≤—Å–µ —Ñ–æ—Ç–æ –±—É–¥—É—Ç –≤ —ç—Ç–æ–π –ø–∞–ø–∫–µ –Ω–∞ Cloudinary
    allowed_formats: ["jpg", "jpeg", "png", "gif"],
  },
});
const upload = multer({ storage });

// =======================================
// Middleware
// =======================================
app.use(express.json()); // –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å JSON
app.use(express.static(path.join(__dirname))); // –æ—Ç–¥–∞—ë–º –≤—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞

// =======================================
// –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã cards, –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
// =======================================
async function createTableIfNotExists() {
  try {
    await pool.query(`
      CREATE TABLE IF NOT EXISTS cards (
        id SERIAL PRIMARY KEY,
        name TEXT NOT NULL,
        price TEXT NOT NULL,
        description TEXT,
        availability TEXT,
        imgSrc TEXT,
        date TEXT
      )
    `);
    console.log("‚úÖ –¢–∞–±–ª–∏—Ü–∞ cards –≥–æ—Ç–æ–≤–∞");
  } catch (err) {
    console.error("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–∞–±–ª–∏—Ü—ã:", err);
  }
}
createTableIfNotExists();

// =======================================
// API –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫
// =======================================

// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏
app.get("/api/cards", async (req, res) => {
  try {
    const { rows } = await pool.query("SELECT * FROM cards ORDER BY id ASC");
    res.json(rows);
  } catch (err) {
    console.error("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–∞—Ä—Ç–æ—á–µ–∫:", err);
    res.status(500).json({ error: "–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–∞—Ä—Ç–æ—á–µ–∫" });
  }
});

// –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏ (–ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å)
app.post("/api/cards", async (req, res) => {
  const cards = req.body;
  try {
    await pool.query("TRUNCATE cards");
    for (const c of cards) {
      await pool.query(
        "INSERT INTO cards (name, price, description, availability, imgSrc, date) VALUES ($1,$2,$3,$4,$5,$6)",
        [c.name, c.price, c.description, c.availability, c.imgSrc, c.date]
      );
    }
    res.json({ status: "ok" });
  } catch (err) {
    console.error("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∫–∞—Ä—Ç–æ—á–µ–∫:", err);
    res.status(500).json({ error: "–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∫–∞—Ä—Ç–æ—á–µ–∫" });
  }
});

// =======================================
// API –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ –Ω–∞ Cloudinary
// =======================================
app.post("/api/upload", upload.single("photo"), (req, res) => {
  if (!req.file || !req.file.path) {
    return res.status(400).json({ error: "–§–∞–π–ª –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω" });
  }
  // –í–æ–∑–≤—Ä–∞—â–∞–µ–º URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å Cloudinary
  res.json({ path: req.file.path });
});

// =======================================
// –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
// =======================================
app.listen(PORT, () => {
  console.log(`Server is running on port ${PORT}`);
});



..............................................................................


–í–æ—Ç –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Cloudinary –¥–ª—è —Ç–≤–æ–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ Render:

1Ô∏è‚É£ –ù–∞ Cloudinary

–ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —É —Ç–µ–±—è –µ—Å—Ç—å —Ç—Ä–∏ –∑–Ω–∞—á–µ–Ω–∏—è:

cloud_name ‚Äì —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è —Ç–≤–æ–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞

api_key ‚Äì –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á API

api_secret ‚Äì —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á API

2Ô∏è‚É£ –í Render (Environment Variables)

–ó–∞–π–¥–∏ –≤ Render ‚Üí —Ç–≤–æ–π —Å–µ—Ä–≤–∏—Å ‚Üí Environment.

–ù–∞–∂–º–∏ ‚ÄúAdd Environment Variable‚Äù.

–î–æ–±–∞–≤—å —Ç—Ä–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

Key	Value
CLOUDINARY_CLOUD_NAME	—Ç–≤–æ–π cloud_name
CLOUDINARY_API_KEY	—Ç–≤–æ–π api_key
CLOUDINARY_API_SECRET	—Ç–≤–æ–π api_secret

–°–æ—Ö—Ä–∞–Ω–∏.


...............................................................
–ù–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ Cloudinary –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ —Ç—ã –Ω–µ —É–≤–∏–¥–∏—à—å —Å—Ä–∞–∑—É –≤—Å–µ —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è.

–ù—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ:

–í –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É –Ω–∞–∂–º–∏ –Ω–∞ –∞–≤–∞—Ç–∞—Ä/–∏–∫–æ–Ω–∫—É –ø—Ä–æ—Ñ–∏–ª—è ‚Üí ‚ÄúAccount Settings‚Äù –∏–ª–∏ ‚ÄúDashboard‚Äù.

–í —Ä–∞–∑–¥–µ–ª–µ API –∏–ª–∏ Account Details –±—É–¥—É—Ç —Ç—Ä–∏ –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è:

Cloud name ‚Üí —Ç–≤–æ–π CLOUDINARY_CLOUD_NAME

API Key ‚Üí —Ç–≤–æ–π CLOUDINARY_API_KEY

API Secret ‚Üí —Ç–≤–æ–π CLOUDINARY_API_SECRET (—Å–µ–∫—Ä–µ—Ç–Ω—ã–π, —Å–∫—Ä—ã—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –º–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å)

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Ç—ã –±–µ—Ä—ë—à—å —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –∏ –¥–æ–±–∞–≤–ª—è–µ—à—å –∏—Ö –≤ Render –∫–∞–∫ Environment Variables.


	
Key Name
Date Created
API Key
API Secret
Status
 
Root
Root

Aug 31, 2025
413135836678655

xMXXV_kxoAO9ihgO17JIJd4eX3k


Active
...........................................
	<!-- –ü–æ–ª–µ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ñ–æ—Ç–æ —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ -->
						<div class="add--foto adds">
							<label for="photo">–í—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</label>
							<input type="file" id="photo" name="photo" accept="image/*">
						</div>


–ù–µ—Ç üôÇ, —ç—Ç–æ—Ç –∫—É—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –º–µ–Ω—è—Ç—å –Ω–µ –Ω—É–∂–Ω–æ.

üëâ –í–æ—Ç –ø–æ—á–µ–º—É:

–ü–æ–ª–µ input type="file" (<input type="file" id="photo" name="photo" accept="image/*">) —É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ.

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –∫–∞—Ä—Ç–∏–Ω–∫—É —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–∞.

JS-—Å–∫—Ä–∏–ø—Ç (–∫–æ—Ç–æ—Ä—ã–π –º—ã —Ç–æ–ª—å–∫–æ —á—Ç–æ –ø–µ—Ä–µ–ø–∏—Å–∞–ª–∏) –±–µ—Ä—ë—Ç —ç—Ç–æ—Ç —Ñ–∞–π–ª, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –Ω–∞ —Ç–≤–æ–π —Å–µ—Ä–≤–µ—Ä –≤ FormData.

–°–µ—Ä–≤–µ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ–∞–π–ª –∏ —Å–∞–º –∑–∞–ª–∏–≤–∞–µ—Ç –µ–≥–æ –≤ Cloudinary, –∞ –æ–±—Ä–∞—Ç–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–π URL.

–í –∫–∞—Ä—Ç–æ—á–∫—É —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏–º–µ–Ω–Ω–æ —ç—Ç–æ—Ç URL (–Ω–µ –ª–æ–∫–∞–ª—å–Ω—ã–π –ø—É—Ç—å).

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º:

HTML –º–µ–Ω—è—Ç—å –Ω–µ –Ω–∞–¥–æ.

–í—Å—ë ¬´–≤–æ–ª—à–µ–±—Å—Ç–≤–æ¬ª —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ JS + server.js.




